window.__require=function t(e,c,o){function i(s,r){if(!c[s]){if(!e[s]){var h=s.split("/");if(h=h[h.length-1],!e[h]){var a="function"==typeof __require&&__require;if(!r&&a)return a(h,!0);if(n)return n(h,!0);throw new Error("Cannot find module '"+s+"'")}s=h}var l=c[s]={exports:{}};e[s][0].call(l.exports,function(t){return i(e[s][1][t]||t)},l,l.exports,t,e,c,o)}return c[s].exports}for(var n="function"==typeof __require&&__require,s=0;s<o.length;s++)i(o[s]);return i}({SE_spot:[function(t,e){"use strict";cc._RF.push(e,"0bc3eGlrNhO4JRF3thfk0JD","SE_spot"),cc.Class({extends:cc.Component,properties:{},start:function(){},init:function(t){this.node.zIndex=6,this.node.stopAllActions();var e=Math.floor(256*Math.random()),c=Math.floor(256*Math.random()),o=Math.floor(256*Math.random());this.node.color=new cc.color(e,c,o);var i=t.x-150,n=t.y-50,s=cc.v2(i+300*Math.random(),n+250*Math.random());this.node.setPosition(s),this.node.scale=.5+3*Math.random();var r=cc.moveTo(1+.5*Math.random(),t),h=cc.callFunc(function(){game.killSpot(this.node)},this),a=cc.sequence(r,h);this.node.runAction(a)},init_2:function(t){this.node.zIndex=6,this.node.stopAllActions();var e=Math.floor(256*Math.random()),c=Math.floor(256*Math.random()),o=Math.floor(256*Math.random());this.node.color=new cc.color(e,c,o);var i=cc.v2(t);this.node.setPosition(i),this.node.scale=.7+1.1*Math.random();var n=t.x-150,s=t.y,r=cc.v2(n+300*Math.random(),s+150*Math.random()),h=cc.moveTo(.2+.3*Math.random(),r),a=cc.callFunc(function(){game.killSpot(this.node)},this),l=cc.sequence(h,a);this.node.runAction(l)}}),cc._RF.pop()},{}],block:[function(t,e){"use strict";cc._RF.push(e,"43768oCYCZE1KI+N1t0n9p5","block"),cc.Class({extends:cc.Component,properties:{},onLoad:function(){this.arr_children=this.node.children,this.canTouch=!0},showSE:function(){var t=this.arr_children[this.blockType].getChildByName("entity").getComponent(cc.Animation);t&&(cc.log(t),t.play())},setBlock:function(){for(var t=this.node.children,e=t.length-1;e>=0;e--)e==this.blockType?t[e].active=!0:t[e].active=!1},setSpotPos:function(){this.canTouch=!0;var t=this.node.getPosition();this.pos_spotWorld=cc.v2(t.x+this.pos_spotParent.x,t.y+this.pos_spotParent.y)},init:function(t,e,c,o){this.score=0,o&&(this.score=1),this.canTouch=!1,this.blockType=e,this.pos_spotParent=this.arr_children[this.blockType].getChildByName("spot").getPosition();var i=cc.v2(t.x-this.pos_spotParent.x,t.y-this.pos_spotParent.y);this.node.setPosition(cc.v2(i.x,i.y+100));var n=cc.moveTo(.2,cc.v2(i.x,i.y-10)),s=cc.moveTo(.05,cc.v2(i.x,i.y+10)),r=cc.moveTo(.05,cc.v2(i.x,i.y-3)),h=cc.moveTo(.03,cc.v2(i.x,i.y)),a=cc.callFunc(function(){game.moveBlock()});if(c)this.node.setPosition(i),this.canTouch=!0;else{var l=cc.sequence(n,s,r,h,a);this.node.runAction(l)}this.pos_spotWorld=t,this.setBlock()},start:function(){},touchBegin:function(t){this.node.scaleY=this.node.scaleY-t/6,this.node.scaleY<.8&&(this.node.scaleY=.8),game.hero.scaleY=this.node.scaleY,game.hero.scaleX+=t/10,game.hero.scaleX>1.2&&(game.hero.scaleX=1.2),this.node.scaleY>.8&&(game.hero.y=game.hero.y-t/8*this.arr_children[this.blockType].getChildByName("entity").height)},touchEnd:function(){this.node.stopAllActions(),game.hero.scaleY=1,game.hero.scaleX=1;var t=1-this.node.scaleY,e=cc.scaleTo(t/5,1,1+t/2),c=cc.scaleTo(t/8,1,1-t/5),o=cc.scaleTo(t/10,1,1),i=cc.sequence(e,c,o);this.node.runAction(i)}}),cc._RF.pop()},{}],game:[function(t,e){"use strict";cc._RF.push(e,"72c97j7VZFCUr6EbrtKSu0w","game"),cc.Class({extends:cc.Component,properties:{layer_rank:cc.Node,itemParent:cc.Node,layer_game:cc.Node,layer_start:cc.Node,bg:cc.Node,hero:cc.Node,hero_:cc.Node,layer_over:cc.Node,layer_log:cc.Node,SE_circle:cc.Node,btn_start:cc.Node,btn_rank:cc.Node,pre_item:cc.Prefab,pre_spot:cc.Prefab,pre_block:cc.Prefab,lab_score:cc.Label,totalScore:cc.Label,bestScore:cc.Label,rank_1:cc.Label,rating_1:cc.Label,rank_2:cc.Label,rating_2:cc.Label,rank_3:cc.Label,rating_3:cc.Label,SE_score:cc.Label,player_name:cc.Label,player_QQ:cc.Label,photo_1:cc.Sprite,photo_2:cc.Sprite,photo_3:cc.Sprite,spa_photo:cc.SpriteAtlas,audio_score_1:cc.AudioClip,audio_score_2:cc.AudioClip,audio_fall:cc.AudioClip,audio_touch_1:cc.AudioClip,audio_touch_2:cc.AudioClip,audio_jump:cc.AudioClip,audio_SE:cc.AudioClip},onLoad:function(){this.layer_log.active=!0,this.gameType=0,this.bestScore_num=cc.sys.localStorage.getItem("bestScore"),this.bestScore_num||(this.bestScore_num=0),this.lab_score.string=0,this.bestScore.string=this.bestScore_num,window.game=this,cc.director.getCollisionManager().enabled=!0,this.SE_circle.zIndex=5,this.checkSE=0,this.layer_rank.active=!1,this.layer_game.active=!1,this.layer_start.active=!0,this.layer_start.zIndex=10,this.layer_over.zIndex=10,this.layer_over.active=!1,this.checkOk=1,this.check_colorEgg=0,this.checkTime=0,this.hero_.active=!1,this.hero.active=!1,this.checkSlip=!1,this.getPlayer(),this.setInfor(),this.setTouch();var t=Math.floor(9*Math.random());this.bg.color=new cc.color(this.bgcolor[t].r,this.bgcolor[t].g,this.bgcolor[t].b),this.setReady()},getUser:function(){Bmob.initialize("0ed3c1dd7e909839","123456"),Bmob.debug(!0),Bmob.Query("jump").find().then(function(t){for(var e=0;e<t.length;e++)cc.log(t[e].name),cc.log("http://q1.qlogo.cn/g?b=qq&nk="+t[e].qq+"&s=640")}).catch(function(t){alert("\u8fde\u63a5\u6570\u636e\u5e93\u5931\u8d25"),console.log(t)})},addUser:function(t,e,c){if(Bmob.initialize("0ed3c1dd7e909839","123456"),Bmob.debug(!0),""!=t){var o=Bmob.Query("jump");o.set("name",t),o.set("qq",e),o.set("grade",c),o.save().then(function(t){console.log(t[0].name)}).catch(function(t){console.log(t)})}},getPlayer:function(){var t=this;Bmob.initialize("0ed3c1dd7e909839","123456"),Bmob.debug(!0),Bmob.Query("jump").find().then(function(e){t.arr_infor=e,cc.log(t.arr_infor),t.addItem()}).catch(function(t){alert("\u8fde\u63a5\u6570\u636e\u5e93\u5931\u8d25"),console.log(t)})},addPlayer:function(t,e,c){if(Bmob.initialize("0ed3c1dd7e909839","123456"),Bmob.debug(!0),""!=t){var o=Bmob.Query("jump");o.set("name",t),o.set("qq",e),o.set("grade",c),o.save().then(function(t){console.log(t)}).catch(function(o){var i=Bmob.Query("jump");i.set("name",t),i.set("qq",e),i.set("grade",c),i.save().then(function(t){console.log(t)}).catch(function(t){console.log(t)}),console.log(o)})}},clickButton:function(t,e){if("start"==e){this.hero.stopAllActions();var c=cc.rotateTo(.01,0);this.hero.runAction(c),this.clearAllblock(),this.unschedule(this.callBack_ready),this.multiple=1,this.gameType=1,this.checkJump=1,this.layer_game.active=!0,this.layer_start.active=!1,this.lab_score.string=0,this.scoreNum=0,this.hero.active=!0,this.hero.zIndex=7,this.hero.setPosition(cc.v2(-140,-140)),this.createBlock(cc.v2(-140,-140),0,!0,!0),this.createBlock(cc.v2(110,32),0,!0,!1)}else"rank"==e?(this.layer_rank.zIndex=15,this.layer_rank.active=!0):"closeRank"==e?this.layer_rank.active=!1:"replay"==e?(this.unschedule(this.callBack_ready),this.multiple=1,this.checkJump=0,this.lab_score.string=0,this.scoreNum=0,c=cc.rotateTo(.01,0),this.hero.runAction(c),this.layer_over.active=!1,this.clearAllblock(),this.hero.setPosition(cc.v2(-140,-140)),this.initHero(cc.v2(-140,-140)),this.createBlock(cc.v2(-140,-140),0,!0,!0),this.createBlock(cc.v2(110,32),0,!0,!1)):"login"==e&&(this.QQ_str=this.player_QQ.string,this.name=this.player_name.string,this.layer_log.active=!1)},start:function(){},setReady:function(){this.hero.active=!0,this.hero.zIndex=2,this.hero.setPosition(cc.v2(-140,-140)),this.createBlock(cc.v2(-140,-140),0,!0,!0),this.createBlock(cc.v2(110,32),0,!0,!1),this.callBack_ready=function(){for(var t=0,e=this.node.children,c=cc.v2(0,0),o=e.length-1;o>=0;o--){var i=e[o].getComponent("block");i&&(2==++t?i.touchEnd():1==t&&(c=i.pos_spotWorld))}var n=this.hero.getPosition(),s=c.sub(n).normalize(),r=cc.callFunc(function(){this.hero.anchorY=.5,this.hero.y=this.hero.y+this.hero.height/2},this),h=cc.jumpTo(.4,c.x,c.y+50,200,1);if(s.x>0)var a=cc.rotateBy(.4,360);else a=cc.rotateBy(.4,-360);var l=cc.callFunc(function(){this.hero.anchorY=0,this.hero.y=this.hero.y-this.hero.height/2,this.hero_.active=!0,this.scheduleOnce(function(){this.hero_.active=!1},.1)},this),u=cc.spawn(h,a),d=cc.sequence(r,u,l);cc.audioEngine.play(this.audio_jump,!1,1),this.hero.runAction(d),game.removeBlock(),game.checkMove()},this.schedule(this.callBack_ready,1.5)},update:function(t){if(1==this.isTouchBegin){this.touchTime<350&&this.touchTime++;for(var e=0,c=this.node.children,o=c.length-1;o>=0;o--){var i=c[o].getComponent("block");i&&2==++e&&i.touchBegin(t)}}if(1==this.check_colorEgg&&(this.checkTime++,200==this.checkTime)){this.check_colorEgg=0,this.checkTime=0;var n=this.scoreNum;this.addScore(n)}},setTouch:function(){this.node.on("touchstart",function(){if(this.check_colorEgg=0,this.checkTime=0,1==this.gameType&&0!=this.canTouch()){this.id_1=cc.audioEngine.play(this.audio_touch_1,!1,1),cc.audioEngine.setFinishCallback(this.id_1,function(){this.id_2=cc.audioEngine.play(this.audio_touch_2,!0,1)}),this.checkScore=-1,this.checkPass=0,this.touchTime=0,this.isTouchBegin=!0,this.hero_.active=!1;for(var t=5+Math.floor(10*Math.random()),e=this.hero.getPosition(),c=1;c<=t;c++)this.createSpot(e);this.callBack_spot=function(){for(var t=5+Math.floor(10*Math.random()),e=this.hero.getPosition(),c=1;c<=t;c++)this.createSpot(e)},this.schedule(this.callBack_spot,.5)}},this),this.node.on("touchmove",function(){this.gameType},this),this.node.on("touchend",function(){if(1==this.gameType&&0!=this.canTouch()&&1!=this.checkPass){cc.audioEngine.stop(this.id_1),cc.audioEngine.stop(this.id_2),this.unschedule(this.callBack_spot),this.clearAllSpot(),this.clearAllSpot(),this.clearAllSpot(),this.checkPass=1,this.isTouchBegin=!1,this.checkOk=0;for(var t=0,e=this.node.children,c=cc.v2(0,0),o=e.length-1;o>=0;o--){var i=e[o].getComponent("block");i&&(2==++t?i.touchEnd():1==t&&(c=i.pos_spotWorld))}var n=this.hero.getPosition(),s=c.sub(n).normalize(),r=9*this.touchTime,h=cc.v2(n.x+s.x*r,n.y+s.y*r+this.hero.height/2),a=cc.callFunc(function(){this.hero.anchorY=.5,this.hero.y=this.hero.y+this.hero.height/2},this),l=cc.jumpTo(.4,h,200,1);if(s.x>0)var u=cc.rotateBy(.4,360);else u=cc.rotateBy(.4,-360);var d=cc.callFunc(function(){this.hero.anchorY=0,this.hero.y=this.hero.y-this.hero.height/2,this.hero_.active=!0,this.scheduleOnce(function(){if(-1==this.checkScore){cc.audioEngine.stopAll(),cc.audioEngine.play(this.audio_fall,!1,1),this.gameType=0;for(var t=this.node.children,e=[],c=t.length-1;c>=0;c--)t[c].getComponent("block")&&e.push(c);var o=t[e[0]].getComponent("block").pos_spotWorld,i=t[e[1]].getComponent("block").pos_spotWorld,n=this.hero.getPosition();n.x>o.x&&n.x>i.x&&(t[e[0]].zIndex=9),n.x<o.x&&n.x<i.x?t[e[0]].zIndex=9:t[e[1]].zIndex=9,this.hero_.active=!1;var s=cc.moveBy(.5,cc.v2(0,-75)),r=cc.callFunc(function(){this.totalScore.string=this.scoreNum,this.scoreNum>this.bestScore_num?(this.addPlayer(this.name,this.QQ_str,this.scoreNum),cc.sys.localStorage.setItem("bestScore",this.scoreNum),this.bestScore_num=this.scoreNum,this.bestScore.string=this.scoreNum):this.bestScore.string=this.bestScore_num,this.clearItem(),this.getPlayer(),this.layer_over.active=!0},this),h=cc.sequence(s,r);this.hero.runAction(h)}else 0==this.checkScore&&(this.hero_.active=!1)},.1),this.checkOk=1},this),p=cc.spawn(l,u),g=cc.sequence(a,p,d);cc.audioEngine.play(this.audio_jump,!1,1),this.hero.runAction(g)}},this)},SE_block:function(){if(0!=this.gameType)for(var t=this.node.children,e=0,c=t.length-1;c>=0;c--){var o=t[c].getComponent("block");o&&2==(e+=1)&&o.blockType>=23&&(t[c].getComponent("block").showSE(),this.multiple>1&&(this.check_colorEgg=1),23==o.blockType&&(0==this.checkSE&&(this.id_SE=cc.audioEngine.play(this.audio_SE,!0,1)),this.checkSE+=1))}},perfect_down:function(){this.SE_circle.scale=1,this.SE_circle.opacity=255;var t=this.hero.getPosition();this.SE_circle.setPosition(cc.v2(t.x,t.y+20));var e=cc.scaleTo(.5,5,2),c=cc.fadeOut(.5),o=cc.spawn(e,c);this.SE_circle.runAction(o)},addScore:function(t){if(1==this.gameType){1==t?cc.audioEngine.play(this.audio_score_1,!1,1):cc.audioEngine.play(this.audio_score_2,!1,1),this.SE_score.string="+"+t,this.SE_score.node.opacity=255;var e=this.hero.getPosition();this.SE_score.node.setPosition(cc.v2(e.x,e.y+150));var c=cc.moveBy(1,cc.v2(0,200)),o=cc.fadeOut(1),i=cc.spawn(c,o);this.SE_score.node.runAction(i),this.scoreNum+=t,this.lab_score.string=this.scoreNum}},initHero:function(t){this.hero.setPosition(cc.v2(t.x,t.y+300));var e=cc.moveTo(.4,t),c=cc.callFunc(function(){this.gameType=1,this.checkJump=1},this),o=cc.sequence(e,c);this.hero.runAction(o)},clearAllblock:function(){for(var t=this.node.children,e=t.length-1;e>=0;e--)t[e].getComponent("block")&&(t[e].stopAllActions(),this.killBlock(t[e]))},clearAllSpot:function(){for(var t=this.node.children,e=t.length-1;e>=0;e--)t[e].getComponent("SE_spot")&&this.killSpot(t[e])},canTouch:function(){if(0==this.checkJump)return!1;if(0==this.checkOk)return!1;for(var t=this.node.children,e=t.length-1;e>=0;e--){var c=t[e].getComponent("block");if(c&&0==c.canTouch)return!1}return!0},moveBlock:function(){for(var t=this,e=[],c=(i=this.node.children).length-1;c>=0;c--)(r=i[c].getComponent("block"))&&e.push(r.pos_spotWorld);var o=cc.v2((e[0].x-e[1].x)/2,(e[0].y-e[1].y)/2);this.pos_move=cc.v2(e[1].x+o.x,e[1].y+o.y+150);for(var i,n=function(e){(r=i[e].getComponent("block"))&&(r.canTouch=!1,a=cc.moveBy(.5,cc.v2(-1*t.pos_move.x,-1*t.pos_move.y)),l=cc.callFunc(function(){i[e].getComponent("block").setSpotPos()},t),h=cc.sequence(a,l),i[e].runAction(h))},s=(i=this.node.children).length-1;s>=0;s--){var r,h;n(s)}var a=cc.moveBy(.5,cc.v2(-1*this.pos_move.x,-1*this.pos_move.y));this.hero.runAction(a);var l=cc.moveBy(.5,cc.v2(-1*this.pos_move.x,-1*this.pos_move.y));this.SE_score.node.runAction(l);var u=cc.moveBy(.5,cc.v2(-1*this.pos_move.x,-1*this.pos_move.y));this.SE_circle.runAction(u),this.SE_block()},removeBlock:function(){for(var t=this.node.children,e=t.length-1;e>=0;e--){var c=t[e].getComponent("block");c&&c.pos_spotWorld.y<-900&&(23==c.blockType&&(this.checkSE-=1,0==this.checkSE&&cc.audioEngine.stop(this.id_SE)),this.killBlock(t[e]))}},checkMove:function(){for(var t=[],e=this.node.children,c=e.length-1;c>=0;c--){var o=e[c].getComponent("block");o&&t.push(o.pos_spotWorld)}var i=t[0].sub(t[1]).normalize();10*Math.random()<5&&(i.x=-1*i.x);var n=160*Math.random()+290,s=cc.v2(t[0].x+i.x*n,t[0].y+i.y*n),r=Math.floor(26*Math.random());this.createBlock(s,r,!1,!1)},killBlock:function(t){t.removeFromParent()},killSpot:function(t){t.removeFromParent()},createSpot:function(t){var e=cc.instantiate(this.pre_spot);e.parent=this.node,e.getComponent("SE_spot").init(t)},createSpot_2:function(t){var e=cc.instantiate(this.pre_spot);e.parent=this.node,e.getComponent("SE_spot").init_2(t)},createBlock:function(t,e,c,o){var i=cc.instantiate(this.pre_block);i.parent=this.node,i.getComponent("block").init(t,e,c,o),0==this.gameType?i.zIndex=1:i.zIndex=4},compare:function(t){return function(e,c){var o=e[t];return c[t]-o}},setInfor:function(){this.bgcolor=[{r:194,g:124,b:136},{r:200,g:173,b:196},{r:128,g:118,b:163},{r:49,g:112,b:167},{r:17,g:101,b:154},{r:30,g:158,b:179},{r:32,g:161,b:98},{r:178,g:207,b:135},{r:221,g:200,b:113}]},clearItem:function(){for(var t=this.itemParent.children,e=t.length-1;e>=0;e--)t[e].getComponent("item")&&t[e].removeFromParent()},addItem:function(){cc.log(this.arr_infor),this.arr_infor.sort(this.compare("grade"));var t=this.arr_infor.length;this.arr_infor.length>50&&(t=50),this.itemParent.height=104*t;for(var e=t-1;e>2;e--)this.arr_infor[e].name==this.name&&(this.rank_1.string=e-2,this.rating_1.string=this.arr_infor[e-3].grade,this.loadImgByUrl(this.photo_1,this.arr_infor[e-3].qq),this.rank_2.string=e-1,this.rating_2.string=this.arr_infor[e-2].grade,this.loadImgByUrl(this.photo_2,this.arr_infor[e-2].qq),this.rank_3.string=e,this.rating_3.string=this.arr_infor[e-1].grade,this.loadImgByUrl(this.photo_3,this.arr_infor[e-1].qq));for(var c=1;c<=this.arr_infor.length;c++){var o=this.getItem(),i=o.getComponent("item"),n=this.arr_infor[c-1].name,s=this.arr_infor[c-1].grade,r=this.arr_infor[c-1].qq;i.init(n,c,s,r),o.y=-48-104*(c-1)}},getItem:function(){var t=cc.instantiate(this.pre_item);return t.parent=this.itemParent,t},setImg:function(t,e){t.spriteFrame=e},loadImgByUrl:function(t,e){cc.loader.load({url:"https://q1.qlogo.cn/g?b=qq&nk="+e+"&s=640",type:"png"},function(e,c){e||setImg(t,new cc.SpriteFrame(c))})}}),cc._RF.pop()},{}],hero_:[function(t,e){"use strict";cc._RF.push(e,"7fb5dqB2DVFcKQ9YiQn5zSF","hero_"),cc.Class({extends:cc.Component,properties:{},onCollisionEnter:function(t,e){if(0!=game.gameType){var c=t.node.parent.getComponent("block");if(c){if(0==c.score)if(10==t.tag&&1e3==e.tag)c.score=2,game.multiple*=2,game.addScore(game.multiple),game.perfect_down(),game.removeBlock(),game.checkMove();else if(11==t.tag&&1e3==e.tag){c.score=1,game.multiple=1,game.addScore(game.multiple);for(var o=5+Math.floor(10*Math.random()),i=1;i<=o;i++){var n=game.hero.getPosition();n.x-=10,n.y-=10,n=cc.v2(n.x+20*Math.random(),n.y+20*Math.random()),game.createSpot_2(n)}game.removeBlock(),game.checkMove()}if(-1==game.checkScore)if(10==t.tag&&1e3==e.tag)game.checkScore=1;else if(11==t.tag&&1e3==e.tag)game.checkScore=2;else if(11==t.tag&&1001==e.tag){game.gameType=0,game.checkScore=0;var s,r=c.pos_spotWorld;s=game.hero.getPosition().sub(r).x>0?cc.rotateTo(.2,30):cc.rotateTo(.2,-30);var h=cc.callFunc(function(){game.layer_over.active=!0},this),a=cc.sequence(s,h);game.hero.runAction(a),game.checkSlip=!0}}}},onLoad:function(){},start:function(){}}),cc._RF.pop()},{}],item:[function(t,e){"use strict";cc._RF.push(e,"913ceGdna5KMpNjbhw186xx","item"),cc.Class({extends:cc.Component,properties:{lab_ranking:cc.Label,lab_rating:cc.Label,lab_name:cc.Label,sp_photo:cc.Sprite,spf_bg:cc.SpriteFrame,spa_photo:cc.SpriteAtlas},start:function(){},init:function(t,e,c,o){this.lab_name.string=t,this.lab_ranking.string=e,this.lab_rating.string=c,e%2==0&&(this.node.getComponent(cc.Sprite).spriteFrame=this.spf_bg),game.loadImgByUrl(this.sp_photo,o)}}),cc._RF.pop()},{}]},{},["SE_spot","block","game","hero_","item"]);